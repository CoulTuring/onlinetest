(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[86],{wm2N:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,o,l,r=a("bx4M"),i=(a("Pwec"),a("CtXQ")),s=(a("+L6B"),a("2/Rp")),c=(a("5NDa"),a("5rEg")),h=a("d6i3"),f=a.n(h),p=a("1l/V"),u=a.n(p),d=a("p0pE"),g=a.n(d),w=a("2Taf"),m=a.n(w),b=a("vZ4D"),x=a.n(b),y=a("l4Ni"),E=a.n(y),S=a("ujKo"),v=a.n(S),P=a("MhPg"),C=a.n(P),T=(a("g9YV"),a("wCAj")),I=a("q1tI"),O=a.n(I),k=a("MuoO"),Y=a("zHco"),D=a("FkSf"),V=a("6NK7"),j=a("X3JL"),N=T["a"].Column,M=(n=Object(k["connect"])(function(e){return{loading:e.loading.effects["schools/offices/fetchYellowPage"],list:e["schools/offices"].yellowPageData.list,pagination:e["schools/offices"].yellowPageData.pagination}}),n((l=function(e){function t(){var e,a;m()(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return a=E()(this,(e=v()(t)).call.apply(e,[this].concat(o))),a.state={yellowPage:null,schoolsOptions:[],schoolsSelectOptions:[],ordering:"",filters:null,filterVisible:!1,filtered:!1,searchText:"",modalTitle:"",modalContent:null,submitButtonText:"",modalVisible:!1,submitting:!1},a.fetchYellowPages=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=a.props,n=t.dispatch,o=t.pagination,l=a.state,r=l.ordering,i=l.filters,s=l.searchText;n(e?{type:"schools/offices/fetchYellowPage",payload:e}:{type:"schools/offices/fetchYellowPage",payload:g()({search:s,page:o?o.current:1,ordering:r},i)})},a.fetchSchools=function(){var e=a.props.dispatch;e({type:"schools/schools/fetchPublic",payload:{},callback:a.fetchSchoolsCallback})},a.fetchSchoolsCallback=function(e){a.setState({schoolsOptions:V["a"].transferObjectsToFilterOptions(e)}),a.setState({schoolsSelectOptions:V["a"].transferObjectsToSelectOptionsWithoutID(e)})},a.handleTableChange=function(){var e=u()(f.a.mark(function e(t,n,o){var l,r;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return l=a.state.searchText,r=V["a"].transferSorterToOrdering(o),a.setState({ordering:r,filters:n}),e.next=5,a.fetchYellowPages(g()({search:l,page:t.current,ordering:r},n));case 5:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.onInputChange=function(e){a.setState({searchText:e.target.value})},a.onYellowPageSearch=u()(f.a.mark(function e(){var t,n,o,l;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state,n=t.ordering,o=t.filters,l=t.searchText,e.next=3,a.fetchYellowPages(g()({search:l,page:1,ordering:n},o));case 3:a.setState({filterVisible:!1,filtered:!!l});case 4:case"end":return e.stop()}},e)})),a}return C()(t,e),x()(t,[{key:"componentDidMount",value:function(){this.fetchYellowPages(),this.fetchSchools()}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=t.pagination,o=t.loading,l=this.state,h=l.schoolsOptions,f=l.filtered,p=l.filterVisible;return O.a.createElement(Y["a"],{title:"\u6821\u56ed\u9ec4\u9875"},O.a.createElement(r["a"],{bordered:!1},n&&O.a.createElement(D["a"],null,n.total),O.a.createElement(j["a"],null),O.a.createElement(T["a"],{dataSource:a,loading:o,rowKey:"id",onChange:this.handleTableChange,pagination:n,width:800,scroll:{x:800}},O.a.createElement(N,{title:"\u90e8\u95e8/\u5b66\u9662",dataIndex:"school",filters:h,sorter:!0,render:function(e,t){return t["school_name"]}}),O.a.createElement(N,{title:"\u540d\u79f0",dataIndex:"name",filterDropdown:O.a.createElement("div",{className:"table-input-search"},O.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165\u90e8\u95e8\u3001\u79d1\u5ba4\u6216\u7535\u8bdd\u53f7\u7801",value:this.state.searchText,onChange:this.onInputChange,onPressEnter:this.onYellowPageSearch}),O.a.createElement(s["a"],{type:"primary",onClick:this.onYellowPageSearch},"\u68c0\u7d22")),filterIcon:O.a.createElement(i["a"],{type:"search",style:{color:f?"#108ee9":"#aaa"}}),filterDropdownVisible:p,onFilterDropdownVisibleChange:function(t){e.setState({filterVisible:t})}}),O.a.createElement(N,{title:"\u7535\u8bdd",dataIndex:"phone"}),O.a.createElement(N,{title:"\u7535\u5b50\u90ae\u7bb1",dataIndex:"email"}),O.a.createElement(N,{title:"\u5185\u7ebf",dataIndex:"internal_phone"}),O.a.createElement(N,{title:"\u4f20\u771f",dataIndex:"fax"}))))}}]),t}(I["PureComponent"]),o=l))||o);t["default"]=M}}]);