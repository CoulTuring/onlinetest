(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[52],{t3sB:function(e,a,t){"use strict";t.r(a);t("IzEo");var n=t("bx4M"),r=(t("P2fV"),t("NJEC")),i=(t("Awhp"),t("KrTs")),o=(t("Pwec"),t("CtXQ")),c=(t("5NDa"),t("5rEg")),s=(t("+L6B"),t("2/Rp")),l=(t("2qtc"),t("kLXV")),p=(t("T2oS"),t("W9HT")),m=(t("miYZ"),t("tsqr")),u=t("qIgq"),d=t.n(u),f=t("d6i3"),b=t.n(f),h=t("1l/V"),g=t.n(h),v=t("p0pE"),w=t.n(v),x=t("2Taf"),C=t.n(x),k=t("vZ4D"),O=t.n(k),E=t("l4Ni"),M=t.n(E),j=t("ujKo"),A=t.n(j),S=t("MhPg"),y=t.n(S),T=(t("g9YV"),t("wCAj")),V=t("q1tI"),I=t.n(V),z=t("MuoO"),F=t("LLXN"),B=t("zHco"),_=t("FkSf"),q=(t("y8nQ"),t("Vl3Y")),N=t("d/v1"),D=t("pJVQ"),P=t("p9nB"),J=t("WAby"),K=function(e){},L=function(e){function a(){var e,t;C()(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=M()(this,(e=A()(a)).call.apply(e,[this].concat(r))),t.state={},t}return y()(a,e),O()(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,a=(e.rooms,e.handleSubmit),t=e.submitButtonText,n=e.submitting;return I.a.createElement("div",null,I.a.createElement(q["a"],{onSubmit:a,layout:"horizontal",className:"modal-form"},I.a.createElement(N["a"],{name:"name",type:"text",size:"default",placeholder:"",label:Object(F["formatMessage"])({id:"common.name"}),required:!0,hasFeedback:!0,validate:[J["g"]],labelCol:{span:6},wrapperCol:{span:18},component:P["g"]}),I.a.createElement(N["a"],{name:"gender",type:"text",size:"default",placeholder:"",label:Object(F["formatMessage"])({id:"common.gender"}),required:!0,hasFeedback:!0,validate:[J["g"]],labelCol:{span:6},wrapperCol:{span:18},component:P["g"]}),I.a.createElement(N["a"],{name:"personid",type:"text",size:"default",placeholder:"",label:Object(F["formatMessage"])({id:"common.personid"}),required:!0,hasFeedback:!0,validate:[J["g"],J["f"]],labelCol:{span:6},wrapperCol:{span:18},component:P["g"]}),I.a.createElement(N["a"],{name:"cell_number",type:"text",size:"default",placeholder:"",label:Object(F["formatMessage"])({id:"common.cell_number"}),required:!0,hasFeedback:!0,validate:[J["g"]],labelCol:{span:6},wrapperCol:{span:18},component:P["g"]}),I.a.createElement(N["a"],{name:"ccb_card",type:"text",size:"default",placeholder:"",label:Object(F["formatMessage"])({id:"common.ccb_card"}),required:!0,hasFeedback:!0,validate:[J["g"]],labelCol:{span:6},wrapperCol:{span:18},component:P["g"]}),I.a.createElement(N["a"],{name:"abc_card",type:"text",size:"default",placeholder:"",label:Object(F["formatMessage"])({id:"common.abc_card"}),required:!0,hasFeedback:!0,validate:[J["g"]],labelCol:{span:6},wrapperCol:{span:18},component:P["g"]}),I.a.createElement(N["a"],{name:"onecard",label:Object(F["formatMessage"])({id:"app.networkServices.onecard"}),size:"default",labelCol:{span:6},wrapperCol:{span:18},defaultChecked:!0,checkedChildren:Object(F["formatMessage"])({id:"common.applied"}),unCheckedChildren:Object(F["formatMessage"])({id:"common.non-applied"}),component:P["e"]}),I.a.createElement(N["a"],{name:"network",label:Object(F["formatMessage"])({id:"app.networkServices.network"}),size:"default",labelCol:{span:6},wrapperCol:{span:18},defaultChecked:!0,checkedChildren:Object(F["formatMessage"])({id:"common.applied"}),unCheckedChildren:Object(F["formatMessage"])({id:"common.non-applied"}),component:P["e"]}),I.a.createElement(N["a"],{name:"content",type:"text",size:"default",placeholder:"",label:Object(F["formatMessage"])({id:"common.content"}),required:!0,hasFeedback:!0,labelCol:{span:6},wrapperCol:{span:18},component:P["f"]}),I.a.createElement(s["a"],{type:"primary",htmlType:"submit",disabled:n,className:"modal-form-button"},t)))}}]),a}(I.a.Component),Q=Object(D["a"])({form:"casualApplicationForm",validate:K})(L);function R(e,a){var t=a.casualApplication;return{initialValues:t,casualApplication:a.casualApplication,submitButtonText:a.submitButtonText||Object(F["formatMessage"])({id:"common.submit"})}}var X=Object(z["connect"])(R)(Q),Y=function(e){},H=function(e){function a(){var e,t;C()(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=M()(this,(e=A()(a)).call.apply(e,[this].concat(r))),t.state={},t}return y()(a,e),O()(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,a=e.handleSubmit,t=e.submitButtonText,n=e.submitting;return I.a.createElement("div",null,I.a.createElement(q["a"],{onSubmit:a,layout:"horizontal",className:"modal-form"},I.a.createElement(N["a"],{name:"approved",label:Object(F["formatMessage"])({id:"app.networkServices.handleResult"}),size:"default",labelCol:{span:6},wrapperCol:{span:18},defaultChecked:!0,checkedChildren:Object(F["formatMessage"])({id:"app.networkServices.handled"}),unCheckedChildren:Object(F["formatMessage"])({id:"app.networkServices.processing"}),component:P["e"]}),I.a.createElement(N["a"],{name:"opinion",type:"text",size:"default",placeholder:"",label:Object(F["formatMessage"])({id:"app.networkServices.opinion"}),required:!0,hasFeedback:!0,labelCol:{span:6},wrapperCol:{span:18},component:P["f"]}),I.a.createElement(s["a"],{type:"primary",htmlType:"submit",disabled:n,className:"modal-form-button"},t)))}}]),a}(I.a.Component),W=Object(D["a"])({form:"casualApplicationExamineForm",validate:Y})(H);function Z(e,a){var t=a.casualApplication;return{searching:e.loading.effects["people/people/search"],initialValues:t,casualApplication:a.casualApplication,submitButtonText:a.submitButtonText||Object(F["formatMessage"])({id:"common.submit"})}}var G,U,$,ee=Object(z["connect"])(Z)(W),ae=t("6NK7"),te=T["a"].Column,ne=(G=Object(z["connect"])(function(e){return{isAdminOrIsNetworkServicesAdmin:e["auth"].person&&e["auth"].person["roles"].indexOf("admin")>-1||e["auth"].person&&e["auth"].person["roles"].indexOf("networkServicesAdmin")>-1,loading:e.loading.effects["network-services/casual-applications/fetch"],list:e["network-services/casual-applications"].data.list,pagination:e["network-services/casual-applications"].data.pagination}}),G(($=function(e){function a(){var e,t;C()(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=M()(this,(e=A()(a)).call.apply(e,[this].concat(r))),t.state={casualApplication:null,ordering:"",filters:null,filterVisible:!1,filtered:!1,searchText:"",modalTitle:"",modalContent:null,submitButtonText:"",modalVisible:!1,submitting:!1},t.fetchCasualApplications=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=t.props,n=a.dispatch,r=a.pagination,i=t.state,o=i.ordering,c=i.filters,s=i.searchText;n(e?{type:"network-services/casual-applications/fetch",payload:e}:{type:"network-services/casual-applications/fetch",payload:w()({search:s,page:r?r.current:1,ordering:o},c)})},t.handleTableChange=function(){var e=g()(b.a.mark(function e(a,n,r){var i,o;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=t.state.searchText,o=ae["a"].transferSorterToOrdering(r),t.setState({ordering:o,filters:n}),e.next=5,t.fetchCasualApplications(w()({search:i,page:a.current,ordering:o},n));case 5:case"end":return e.stop()}},e)}));return function(a,t,n){return e.apply(this,arguments)}}(),t.editCasualApplication=g()(b.a.mark(function e(){var a,n,r,i,o,c,s=arguments;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=s.length>0&&void 0!==s[0]?s[0]:null,n=t.state.submitting,r=null===a?[Object(F["formatMessage"])({id:"operations.create"},{name:Object(F["formatMessage"])({id:"app.networkServices.casualApplication"})}),Object(F["formatMessage"])({id:"common.create"})]:[Object(F["formatMessage"])({id:"operations.edit"},{name:Object(F["formatMessage"])({id:"app.networkServices.casualApplication"})}),Object(F["formatMessage"])({id:"common.edit"})],i=d()(r,2),o=i[0],c=i[1],e.next=5,t.setState({casualApplication:a?w()({},a):{}});case 5:return e.next=7,t.setState({modalTitle:o,modalContent:I.a.createElement(X,{casualApplication:t.state.casualApplication,title:o,submitButtonText:c,onSubmit:t.onSubmit,submitting:n}),submitButtonText:c,modalVisible:!0});case 7:case"end":return e.stop()}},e)})),t.deleteCasualApplication=function(){var e=g()(b.a.mark(function e(a){var n;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.props.dispatch,n({type:"network-services/casual-applications/remove",payload:{casualApplication:a},callback:function(){return t.deleteCasualApplicationCallback(a["name"])}});case 2:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),t.deleteCasualApplicationCallback=function(e){m["a"].success("".concat(Object(F["formatMessage"])({id:"operations.success-delete"},{name:Object(F["formatMessage"])({id:"app.networkServices.casualApplication"})})," ").concat(e)),t.fetchCasualApplications()},t.onInputChange=function(e){t.setState({searchText:e.target.value})},t.onCasualApplicationSearch=g()(b.a.mark(function e(){var a,n,r,i;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.state,n=a.ordering,r=a.filters,i=a.searchText,e.next=3,t.fetchCasualApplications(w()({search:i,page:1,ordering:n},r));case 3:t.setState({filterVisible:!1,filtered:!!i});case 4:case"end":return e.stop()}},e)})),t.handleCancel=g()(b.a.mark(function e(){return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.setState({modalVisible:!1,modalContent:null});case 2:case"end":return e.stop()}},e)})),t.onSubmit=function(){var e=g()(b.a.mark(function e(a){var n,r,i;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.props.dispatch,r=t.state.casualApplication,i=w()({},a),console.warn("new values: ",i),e.prev=4,e.next=7,t.setState({submitting:!0});case 7:r&&r["id"]?n({type:"network-services/casual-applications/update",payload:{casualApplication:w()({},i)},callback:function(){return t.fetchCasualApplications()}}):n({type:"network-services/casual-applications/add",payload:{casualApplication:i},callback:function(){return t.fetchCasualApplications()}}),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](4),console.log(e.t0);case 13:return e.prev=13,e.next=16,t.setState({submitting:!1});case 16:return e.finish(13);case 17:return e.next=19,t.setState({modalVisible:!1,modalContent:null});case 19:case"end":return e.stop()}},e,null,[[4,10,13,17]])}));return function(a){return e.apply(this,arguments)}}(),t.examineCasualApplication=g()(b.a.mark(function e(){var a,n,r,i,o,c=arguments;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=c.length>0&&void 0!==c[0]?c[0]:null,n=t.state.submitting,r=[Object(F["formatMessage"])({id:"operations.examine"},{name:Object(F["formatMessage"])({id:"app.networkServices.casualApplication"})}),Object(F["formatMessage"])({id:"common.examine"})],i=r[0],o=r[1],e.next=5,t.setState({casualApplication:a?w()({},a):{}});case 5:return e.next=7,t.setState({modalTitle:i,modalContent:I.a.createElement(ee,{casualApplication:t.state.casualApplication,title:i,submitButtonText:o,onSubmit:t.onCasualApplicationExamineSubmit,submitting:n}),submitButtonText:o,modalVisible:!0});case 7:case"end":return e.stop()}},e)})),t.onCasualApplicationExamineSubmit=function(){var e=g()(b.a.mark(function e(a){var n,r;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.props.dispatch,r=t.state.casualApplication,e.prev=2,e.next=5,t.setState({submitting:!0});case 5:n({type:"network-services/casual-applications/examine",payload:w()({},a,{id:r.id}),callback:function(){return t.fetchCasualApplications()}}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),console.log(e.t0);case 11:return e.prev=11,e.next=14,t.setState({submitting:!1});case 14:return e.finish(11);case 15:return e.next=17,t.setState({modalVisible:!1,modalContent:null});case 17:case"end":return e.stop()}},e,null,[[2,8,11,15]])}));return function(a){return e.apply(this,arguments)}}(),t}return y()(a,e),O()(a,[{key:"componentDidMount",value:function(){this.fetchCasualApplications()}},{key:"render",value:function(){var e=this,a=this.props,t=a.isAdminOrIsNetworkServicesAdmin,m=a.list,u=a.pagination,d=a.loading,f=this.state,b=f.filtered,h=f.filterVisible,g=f.modalTitle,v=f.modalContent,w=f.modalVisible;return console.warn("list, pages, loading:",m,u,d,t),I.a.createElement(B["a"],{title:Object(F["formatMessage"])({id:"operations.management"},{name:Object(F["formatMessage"])({id:"app.networkServices.casualApplication"})})},I.a.createElement(n["a"],{bordered:!1},u&&I.a.createElement(_["a"],null,u.total),I.a.createElement(l["a"],{title:g,visible:w,onCancel:this.handleCancel,footer:null},v||I.a.createElement(p["a"],{spinning:d})),I.a.createElement(s["a"],{type:"primary",onClick:function(){return e.editCasualApplication()}},I.a.createElement(F["FormattedMessage"],{id:"operations.create",values:{name:Object(F["formatMessage"])({id:"app.networkServices.casualApplication"})}})),I.a.createElement(T["a"],{dataSource:m,loading:d,rowKey:"id",onChange:this.handleTableChange,pagination:u,width:1920,scroll:{x:1920}},I.a.createElement(te,{title:Object(F["formatMessage"])({id:"common.name"}),dataIndex:"name",filterDropdown:I.a.createElement("div",{className:"table-input-search"},I.a.createElement(c["a"],{placeholder:Object(F["formatMessage"])({id:"common.name"}),value:this.state.searchText,onChange:this.onInputChange,onPressEnter:this.onCasualApplicationSearch}),I.a.createElement(s["a"],{type:"primary",onClick:this.onCasualApplicationSearch},I.a.createElement(F["FormattedMessage"],{id:"common.search"}))),filterIcon:I.a.createElement(o["a"],{type:"search",style:{color:b?"#108ee9":"#aaa"}}),filterDropdownVisible:h,onFilterDropdownVisibleChange:function(a){e.setState({filterVisible:a})}}),I.a.createElement(te,{title:Object(F["formatMessage"])({id:"common.gender"}),dataIndex:"gender"}),I.a.createElement(te,{title:Object(F["formatMessage"])({id:"common.personid"}),dataIndex:"personid"}),I.a.createElement(te,{title:Object(F["formatMessage"])({id:"common.cell_number"}),dataIndex:"cell_number"}),I.a.createElement(te,{title:Object(F["formatMessage"])({id:"common.ccb_card"}),dataIndex:"ccb_card"}),I.a.createElement(te,{title:Object(F["formatMessage"])({id:"common.abc_card"}),dataIndex:"abc_card"}),I.a.createElement(te,{title:Object(F["formatMessage"])({id:"app.networkServices.onecard"}),dataIndex:"onecard",render:function(e){return e?I.a.createElement(i["a"],{status:"success",text:Object(F["formatMessage"])({id:"common.applied"})}):I.a.createElement(i["a"],{status:"error",text:Object(F["formatMessage"])({id:"common.non-applied"})})}}),I.a.createElement(te,{title:Object(F["formatMessage"])({id:"app.networkServices.network"}),dataIndex:"network",render:function(e){return e?I.a.createElement(i["a"],{status:"success",text:Object(F["formatMessage"])({id:"common.applied"})}):I.a.createElement(i["a"],{status:"error",text:Object(F["formatMessage"])({id:"common.non-applied"})})}}),I.a.createElement(te,{title:Object(F["formatMessage"])({id:"common.submit"}),dataIndex:"submitted",render:function(e){return e?I.a.createElement(i["a"],{status:"success",text:Object(F["formatMessage"])({id:"common.submitted"})}):I.a.createElement(i["a"],{status:"error",text:Object(F["formatMessage"])({id:"common.non-submitted"})})}}),I.a.createElement(te,{title:Object(F["formatMessage"])({id:"app.networkServices.opinion"}),dataIndex:"opinion"}),I.a.createElement(te,{title:Object(F["formatMessage"])({id:"app.networkServices.handleResult"}),dataIndex:"approved",render:function(e){return e?I.a.createElement(i["a"],{status:"success",text:Object(F["formatMessage"])({id:"app.networkServices.handled"})}):I.a.createElement(i["a"],{status:"default",text:Object(F["formatMessage"])({id:"app.networkServices.processing"})})}}),I.a.createElement(te,{title:Object(F["formatMessage"])({id:"app.networkServices.examiner"}),dataIndex:"examiner",render:function(e,a){return a["examiner_detail"]?a["examiner_detail"]["name"]:a["examiner"]}}),I.a.createElement(te,{title:Object(F["formatMessage"])({id:"common.operations"}),width:152,fixed:"right",render:function(a,n){return I.a.createElement("div",null,I.a.createElement("a",{onClick:function(){return e.examineCasualApplication(n)}},Object(F["formatMessage"])({id:"common.examine"})),I.a.createElement("span",{className:"ant-divider"}),t&&I.a.createElement(r["a"],{title:Object(F["formatMessage"])({id:"common.delete-ask"}),onConfirm:function(){return e.deleteCasualApplication(n)}},I.a.createElement("a",{href:"#"},I.a.createElement(F["FormattedMessage"],{id:"common.delete"}))))}}))))}}]),a}(V["PureComponent"]),U=$))||U);a["default"]=ne}}]);